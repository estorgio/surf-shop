<% layout('layouts/boilerplate') -%>

<h1><%= currentUser.username %>'s Profile</h1>

<p>Recent Posts:</p>
<% posts.forEach((post) => { %>
<div>
  <a href="/posts/<%= post.id %>"><%= post.title %></a>
</div>
<% }); %>

<p>Update Info:</p>
<form action="/profile?_method=PUT" method="POST" id="update-profile">
  <div>
    <label for="username">Username</label>
    <input
      type="text"
      id="username"
      name="username"
      placeholder="Username"
      value="<%= currentUser.username %>"
      autofocus
      required
    />
  </div>
  <div>
    <label for="current-password">Current password</label>
    <input
      type="password"
      id="current-password"
      name="currentPassword"
      placeholder="Current password"
      required
    />
  </div>
  <div>
    <label for="new-password">New password</label>
    <input
      type="password"
      id="new-password"
      name="newPassword"
      placeholder="New password"
    />
  </div>
  <div>
    <label for="confirm-password">Confirm password</label>
    <input
      type="password"
      id="confirm-password"
      name="confirmPassword"
      placeholder="Confirm password"
    />
  </div>
  <div id="validation-message"></div>
  <div>
    <label for="email">Email</label>
    <input
      type="text"
      id="email"
      name="email"
      placeholder="Email"
      value="<%= currentUser.email %>"
    />
  </div>
  <div>
    <label for="image">Image</label>
    <input type="file" id="image" name="image" />
  </div>
  <input type="submit" />
</form>

<script src="/javascripts/profile.js"></script>
